cmake_minimum_required(VERSION 3.14.5)
project(monitoring_project C)

# Especifica el lenguaje de programación
project(monitoring_project C)

# Incluir directorios de encabezados
include_directories(${CMAKE_SOURCE_DIR}/include)
include_directories(${CMAKE_SOURCE_DIR}/../lib)

# Añadir el ejecutable
add_executable(monitoring_project
    src/main.c
    src/metrics.c
    src/expose_metrics.c
)

# Añadir el directorio donde se instalan las librerías compartidas (instaladas con sudo make install)
link_directories(/usr/local/lib)

# Vincular las librerías libprom y libpromhttp desde /usr/local/lib
target_link_libraries(monitoring_project
    /usr/local/lib/libprom.so
    /usr/local/lib/libpromhttp.so
)

# Opcional: Define el estándar de C
set(CMAKE_C_STANDARD 11)  # O 99, dependiendo de tu código
set(CMAKE_C_STANDARD_REQUIRED ON)
set(CMAKE_C_EXTENSIONS OFF)  # Si quieres usar C sin extensiones específicas del compilador

# Opcional: Incluir opciones de compilación adicionales
# Esto puede incluir opciones para advertencias, optimización, etc.
if(CMAKE_BUILD_TYPE MATCHES Debug)
    target_compile_options(monitoring_project PRIVATE -Wall -Wextra -g)  # Opciones para depuración
else()
    target_compile_options(monitoring_project PRIVATE -Wall -Wextra -O2)  # Opciones para optimización
endif()